Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 sippscen (1.1-2ubuntu2) UNRELEASED; urgency=medium
 .
   * Patch fix-shared-memory.patch:
   *
Author: root <root@OpenSIPS.lxd>

---
The information above should follow the Patch Tagging Guidelines, please
checkout https://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: (upstream|backport|vendor|other), (<patch-url>|commit:<commit-id>)
Bug: <upstream-bugtracker-url>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: (no|not-needed|<patch-forwarded-url>)
Applied-Upstream: <version>, (<commit-url>|commit:<commid-id>)
Reviewed-By: <name and email of someone who approved/reviewed the patch>
Last-Update: 2025-07-07

--- /dev/null
+++ sippscen-1.1/media-server@.service
@@ -0,0 +1,15 @@
+[Unit]
+Description=Media-Endpoints Server
+After=network.target
+
+[Service]
+Environment="PORT=%i"
+EnvironmentFile=-/root/sippscen/server.conf
+EnvironmentFile=-/root/sippscen/server-%i.conf
+ExecStart=/root/sippscen/media_server -p $PORT -w $WAVE -c $CODEC
+KillSignal=SIGINT
+Restart=on-failure
+
+[Install]
+WantedBy=multi-user.target
+
--- sippscen-1.1.orig/server.conf
+++ sippscen-1.1/server.conf
@@ -1,4 +1,4 @@
-PORT=9090
+#PORT=9090
 WAVE=/root/sippscen/wav/sample.wav
 CODEC=pcma
 
--- sippscen-1.1.orig/src/shared_list.cpp
+++ sippscen-1.1/src/shared_list.cpp
@@ -43,7 +43,7 @@ SharedList::SharedList(type_t type, cons
                 std::string(shared_mem_name));
         }
 
-        if ( ftruncate(fd, sizeof(SharedLst) == -1) ) {
+        if ( ftruncate(fd, sizeof(SharedLst)) == -1 ) {
             throw std::runtime_error("Failed to truncate memory: "
                 + std::string(strerror(errno)));
         }
